- name: Verify files on Windows EC2 instance
  run: |
    INSTANCE_ID="i-01a305a3211234"  # Replace with your EC2 instance ID
    TARGET_DIRECTORY="C:\\EmployeeInvitation"  # Windows path with double backslashes

    echo "Verifying if files exist at $TARGET_DIRECTORY on EC2 instance..."

    aws ssm send-command \
      --instance-ids "$INSTANCE_ID" \
      --document-name "AWS-RunPowerShellScript" \
      --comment "Check if files were downloaded" \
      --parameters commands='[
        "if (Test-Path \"C:\\EmployeeInvitation\") { 
          Write-Host \"Directory Exists: C:\\EmployeeInvitation\";
          Get-ChildItem \"C:\\EmployeeInvitation\"
        } else { 
          Write-Host \"Directory not found\" 
        }"
      ]' \
      --timeout-seconds 600 \
      --max-concurrency "50" \
      --max-errors "0" \
      --region us-west-2  # Change this to your AWS region
